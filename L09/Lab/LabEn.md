# Task: Harry Potter Guessing Game (10p)

In this task, you will add types to an existing [game](./game/) based on the Harry Potter universe, which uses an [API](https://wizard-world-api.herokuapp.com/swagger/index.html). The documentation may prove useful. You will need to modify the existing JS file.

## Materials

All necessary information can be found in the [TypeScript documentation](https://www.typescriptlang.org/).

## Requirements

- Add a `tsconfig.json` file. You can do this using the `tsc --init` command (available after installing TypeScript with `npm i -g typescript` or by using `npx -p typescript tsc`).

  - Review the options that are commented out by default. Pay special attention to the `/* Type Checking */` section. Decide which of these options are worth enabling — justify your choice.

- Start by adding types to the `elixirs` and `spells` arrays.

  - Create types for both objects using the API documentation.
  - Add types to the `elixirs` and `spells` variables.

- Add a type to `validOption`, which will contain the string representing the answer to the riddle.

- In the `fetchData` function, you need to add a type to the `endpoint` variable.

  - The type should not just be a plain string — it should accurately represent available endpoints, using the `Endpoints` variable. This can be done in two ways:
    - (Easier): convert the `Endpoints` object into an `enum`.
    - (More advanced): in modern TypeScript, enums are less popular than they used to be. Instead, you can create a type `EndpointType` that will represent the keys of the `Endpoints` object. The type should be dynamic — it should automatically update if the `Endpoints` object is extended. You can find a hint [here](https://www.typescriptlang.org/docs/handbook/enums.html#objects-vs-enums).
  - Check if your solution works by calling `fetchData` with a value that exists in the `Endpoints` object (e.g., `spells`) and with one that doesn't.

- In the `fetchAllData` function, in the `filter` methods, both `elixir` and `spell` have the `any` type. Make sure they have proper types. You can achieve this by assigning the type directly in the functions, making `fetchData` a generic function, or in another way — the choice is yours, but be prepared to justify it.

- `getRandomElements`

  - This function has two arguments: an array and a number of elements to select. Add types to them.
    - The array type should be defined without using `any`, using a [generic function](https://www.typescriptlang.org/docs/handbook/2/generics.html), so the function can accept any array and return elements of the same type.
  - The `indexes` variable is a set, but it does not know it will contain numbers. Assign it the appropriate type.

- In a similar way as for `getRandomElements`, add a type to the argument of the `generateOptions` function.

- Also assign types to the arguments of the `renderOptions` function.

- Fix the errors in the `EventListener` at the bottom of the file:

  - `gameContainer` may be null if such an element is not found on the page. However, we know that such an element exists. Fix this using the [Non-null Assertion operator](https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#non-null-assertion-operator-postfix-).
  - Inside the `EventListener`, there is an error that TypeScript helped detect. Explain what the error is and how to fix it.

- Using the `tsc` command (without additional parameters), show that the code compiles. Compare the resulting file with the initial file.

- For debugging purposes, being able to view the original code in the browser might be helpful. Unfortunately, when viewing the page in `devtools`, even though the element with id `"game"` points to the `eventListener`, it points to its definition in the code generated by `tsc` (how can you check that?). Make the browser point to the original TypeScript code instead.
  - Useful options can be found in `tsconfig.json`, especially [this one](https://www.typescriptlang.org/tsconfig/sourceMap.html) and [this one](https://www.typescriptlang.org/tsconfig/#inlineSourceMap).
